(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{ERmS:function(t,e,r){"use strict";r.r(e),r.d(e,"ProductsModule",function(){return N});var o=r("ofXK"),c=r("tyNb"),i=r("3Pt+"),n=r("fXoL"),d=r("mwRl"),s=r("o5Go"),p=r("5eHb"),a=r("r0qs");function b(t,e){if(1&t&&(n.Ob(0,"option",22),n.lc(1),n.Nb()),2&t){const t=e.$implicit;n.bc("value",t.id),n.yb(1),n.mc(t.name)}}function u(t,e){if(1&t&&(n.Ob(0,"option",22),n.lc(1),n.Nb()),2&t){const t=e.$implicit;n.bc("value",t.id),n.yb(1),n.mc(t.name)}}function l(t,e){1&t&&(n.Ob(0,"div"),n.lc(1,"Create"),n.Nb())}function m(t,e){1&t&&(n.Ob(0,"div"),n.lc(1,"Update"),n.Nb())}let h=(()=>{class t{constructor(t,e,r,o){this.shopService=t,this.productService=e,this.route=r,this.toastr=o}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.getBrands(),this.getTypes(),this.createLoginForm(),this.isAddMode||this.getSingleProduct(this.id)}getSingleProduct(t){this.shopService.getProduct(t).subscribe(t=>{this.product=t,console.log(t),this.updateForm()},t=>console.log(t))}updateForm(){this.productForm.patchValue({name:this.product.name,description:this.product.description,price:this.product.price,pictureUrl:this.product.pictureUrl,productType:this.product.productType,productBrand:this.product.productBrand})}createLoginForm(){this.productForm=new i.d({name:new i.b,description:new i.b,price:new i.b,pictureUrl:new i.b,productType:new i.b,productBrand:new i.b})}getBrands(){this.shopService.getBrands().subscribe(t=>{this.brands=[{id:0,name:"All"},...t]},t=>{console.log(t)})}getTypes(){this.shopService.getTypes().subscribe(t=>{this.types=[{id:0,name:"All"},...t]},t=>{console.log(t)})}onSubmit(){this.isAddMode?this.createProduct():this.updateProduct()}createProduct(){this.productService.postProduct(this.productForm.value).subscribe(t=>{console.log(t),console.log("Succelful post produc subcribe"),this.toastr.success("Product saved"),this.productForm.reset({name:"",describe:"",price:"",pictureUrl:"",productType:"",productBrand:""})},t=>{this.toastr.error(t.message),this.productForm.reset({name:"",describe:"",price:"",pictureUrl:"",productType:"",productBrand:""})})}updateProduct(){this.productService.putProduct(this.productForm.value,this.id).subscribe(t=>{console.log(t),console.log("Succelful post produc subcribe"),this.toastr.success("Product saved"),this.productForm.reset({name:"",describe:"",price:"",pictureUrl:"",productType:"",productBrand:""})},t=>{this.toastr.error(t.message),this.productForm.reset({name:"",describe:"",price:"",pictureUrl:"",productType:"",productBrand:""})})}}return t.\u0275fac=function(e){return new(e||t)(n.Jb(d.a),n.Jb(s.a),n.Jb(c.a),n.Jb(p.b))},t.\u0275cmp=n.Db({type:t,selectors:[["app-product-add"]],decls:42,vars:8,consts:[[1,"content-wrapper"],[3,"pageHeader"],[1,"content"],[1,"container-fluid"],[1,"row"],[1,"col-md-9"],[1,"card","card-primary"],[1,"card-header"],[1,"card-title"],[3,"formGroup","ngSubmit"],[1,"card-body"],[1,"form-group"],["for","name"],["type","text","id","name","placeholder","Enter text","formControlName","name",1,"form-control"],["type","text","id","name","placeholder","Enter text","formControlName","description",1,"form-control"],["type","number","id","name","placeholder","Enter text","formControlName","price",1,"form-control"],["type","text","id","name","placeholder","Enter text","formControlName","pictureUrl",1,"form-control"],[1,"form-control",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[1,"card-footer"],["type","submit",1,"btn","btn-primary"],[4,"ngIf"],[3,"value"]],template:function(t,e){1&t&&(n.Ob(0,"div",0),n.Kb(1,"app-content-header",1),n.Ob(2,"section",2),n.Ob(3,"div",3),n.Ob(4,"div",4),n.Ob(5,"div",5),n.Ob(6,"div",6),n.Ob(7,"div",7),n.Ob(8,"h3",8),n.lc(9,"Quick Example"),n.Nb(),n.Nb(),n.Ob(10,"form",9),n.Vb("ngSubmit",function(){return e.onSubmit()}),n.Ob(11,"div",10),n.Ob(12,"div",11),n.Ob(13,"label",12),n.lc(14,"Product name"),n.Nb(),n.Kb(15,"input",13),n.Nb(),n.Ob(16,"div",11),n.Ob(17,"label",12),n.lc(18,"Description"),n.Nb(),n.Kb(19,"input",14),n.Nb(),n.Ob(20,"div",11),n.Ob(21,"label",12),n.lc(22,"Price"),n.Nb(),n.Kb(23,"input",15),n.Nb(),n.Ob(24,"div",11),n.Ob(25,"label",12),n.lc(26,"Picture Url"),n.Nb(),n.Kb(27,"input",16),n.Nb(),n.Ob(28,"div",11),n.Ob(29,"label"),n.lc(30,"Select Brand"),n.Nb(),n.Ob(31,"select",17),n.kc(32,b,2,2,"option",18),n.Nb(),n.Nb(),n.Ob(33,"div",11),n.Ob(34,"label"),n.lc(35,"Select Type"),n.Nb(),n.Ob(36,"select",17),n.kc(37,u,2,2,"option",18),n.Nb(),n.Nb(),n.Nb(),n.Ob(38,"div",19),n.Ob(39,"button",20),n.kc(40,l,2,0,"div",21),n.kc(41,m,2,0,"div",21),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb(),n.Nb()),2&t&&(n.yb(1),n.ac("pageHeader","Create Product"),n.yb(9),n.ac("formGroup",e.productForm),n.yb(21),n.ac("formControlName","productBrand"),n.yb(1),n.ac("ngForOf",e.brands),n.yb(4),n.ac("formControlName","productType"),n.yb(1),n.ac("ngForOf",e.types),n.yb(3),n.ac("ngIf",e.isAddMode),n.yb(1),n.ac("ngIf",!e.isAddMode))},directives:[a.a,i.l,i.g,i.e,i.a,i.f,i.c,i.i,i.k,o.j,o.k,i.h,i.m],encapsulation:2}),t})();const f=[{path:"",component:r("O5oW").a},{path:"create",component:h},{path:"update/:id",component:h}];let g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.Hb({type:t}),t.\u0275inj=n.Gb({imports:[[c.d.forChild(f)],c.d]}),t})();var v=r("mYbb");let N=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.Hb({type:t}),t.\u0275inj=n.Gb({imports:[[o.b,g,v.a,i.j,p.a.forRoot({positionClass:"toast-bottom-right",preventDuplicates:!0})]]}),t})()}}]);